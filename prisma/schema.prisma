generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  userId        String    @id @default(cuid())
  name          String?
  email         String?   @unique
  emailVerified DateTime?
  image         String?
  password      String?

  accounts   Account[]
  interviews Interview[]
}

model Account {
  id                String  @id @default(cuid())
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String?
  access_token      String?
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String?
  session_state     String?

  user User @relation(fields: [userId], references: [userId])

  @@unique([provider, providerAccountId])
}

model Interview {
  interviewId String   @id @default(uuid())
  user        User     @relation(fields: [userId], references: [userId])
  userId      String
  role        String
  level       String
  techstack   String
  type        String
  createdAt   DateTime @default(now())
  status      String   @default("pending")

  questions Question[]
  feedback  Feedback?
  audio     Interview_audio?
}

model Question {
  questionId   String    @id @default(uuid())
  interview    Interview @relation(fields: [interviewId], references: [interviewId])
  interviewId  String
  questionText String
  answer       String?
  score        Int?
  feedback     String?
}

model Feedback {
  feedbackId       String    @id @default(uuid())
  interview        Interview @relation(fields: [interviewId], references: [interviewId])
  interviewId      String    @unique
  summary          String
  improvementAreas String[]
  confidenceScore  Int
}

model Interview_audio {
  audioId     String    @id @default(uuid())
  interview   Interview @relation(fields: [interviewId], references: [interviewId])
  interviewId String    @unique

  startTime  DateTime
  endTime    DateTime
  transcript String[]
  audioUrl   String
}
